name: Workflow B

on: 
  workflow_run:
    workflows: 
      - Workflow A
    types:
      - completed
    branches:
      - master  


jobs:
  deploy:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3
        name: Checking out repository
      
      - name: Get source branch name
        run: |
          SOURCE_BRANCH=$(git log --pretty=%d -n 1 ${{ github.event.before }}..${{ github.sha }} | grep -o -P 'origin/\K[^,}]+' | head -1)
          echo "Source Branch: $SOURCE_BRANCH"